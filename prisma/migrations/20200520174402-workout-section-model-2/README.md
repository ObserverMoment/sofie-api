# Migration `20200520174402-workout-section-model-2`

This migration has been generated by ObserverMoment at 5/20/2020, 5:44:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Challenge" ALTER COLUMN "scope" SET DEFAULT 'PRIVATE';

ALTER TABLE "public"."Group" ALTER COLUMN "scope" SET DEFAULT 'PRIVATE';

ALTER TABLE "public"."Move" ALTER COLUMN "scope" SET DEFAULT 'PRIVATE';

ALTER TABLE "public"."User" ALTER COLUMN "subscriptionLevel" SET DEFAULT 'FREE',
ALTER COLUMN "unitSystem" SET DEFAULT 'METRIC';

ALTER TABLE "public"."Workout" ALTER COLUMN "difficultyLevel" SET DEFAULT 'ONE',
ALTER COLUMN "scope" SET DEFAULT 'PRIVATE',
ALTER COLUMN "workoutScoreType" SET DEFAULT 'AMREPS';

ALTER TABLE "public"."WorkoutMove" DROP CONSTRAINT IF EXiSTS "WorkoutMove_workoutId_fkey",
DROP COLUMN "workoutId",
ALTER COLUMN "repType" SET DEFAULT 'REPS';

ALTER TABLE "public"."WorldRecord" ALTER COLUMN "workoutScoreType" SET DEFAULT 'AMREPS';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200520173051-workout-section-model..20200520174402-workout-section-model-2
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Benchmark {
   id               String          @default(uuid()) @id
@@ -132,10 +132,8 @@
   move                Move               @relation(fields: [moveId], references: [id])
   moveId              String
   workoutSection      WorkoutSection     @relation(fields: [workoutSectionId], references: [id])
   workoutSectionId    String
-  Workout             Workout?           @relation(fields: [workoutId], references: [id])
-  workoutId           String?
 }
 model WorkoutSection {
   id             String        @default(uuid()) @id
@@ -163,10 +161,9 @@
   workoutScoreType    WorkoutScoreType     @default(AMREPS)
   worldRecords        WorldRecord[]
   challenges          Challenge[]          @relation(references: [id])
   scheduledWorkouts   ScheduledWorkout[]
-  WorkoutSection      WorkoutSection[]
-  WorkoutMove         WorkoutMove[]
+  workoutSections     WorkoutSection[]
 }
 model ScheduledWorkout {
   id             String       @default(uuid()) @id
```


