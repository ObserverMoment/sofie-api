# Migration `20200629101805-user-theme-preference`

This migration has been generated by ObserverMoment at 6/29/2020, 10:18:05 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "ThemePreference" AS ENUM ('DARK', 'LIGHT');

ALTER TABLE "public"."User" ADD COLUMN "themePreference" "ThemePreference"  DEFAULT E'DARK';

ALTER TABLE "public"."WorldRecord" DROP CONSTRAINT IF EXiSTS "WorldRecord_userId_fkey";

ALTER TABLE "public"."WorldRecord" DROP CONSTRAINT IF EXiSTS "WorldRecord_workoutId_fkey";

DROP TABLE "public"."WorldRecord";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200626121417-remove-emom-scoretype..20200629101805-user-theme-preference
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Benchmark {
   id               String          @default(uuid()) @id
@@ -174,9 +174,8 @@
   timecap           Int?
   difficultyLevel   DifficultyLevel    @default(ONE)
   scope             AccessScopeType    @default(PRIVATE)
   workoutScoreType  WorkoutScoreType   @default(AMREPS)
-  worldRecords      WorldRecord[]
   challenges        Challenge[]        @relation(references: [id])
   scheduledWorkouts ScheduledWorkout[]
   workoutSections   WorkoutSection[]
 }
@@ -208,22 +207,8 @@
   scheduledWorkout ScheduledWorkout
   benchmark        Benchmark?
 }
-model WorldRecord {
-  id               String           @default(uuid()) @id
-  createdAt        DateTime         @default(now())
-  updatedAt        DateTime         @updatedAt
-  notes            String?
-  recordValue      Int
-  workoutScoreType WorkoutScoreType @default(AMREPS)
-  gender           Gender
-  workout          Workout          @relation(fields: [workoutId], references: [id])
-  workoutId        String
-  user             User?            @relation(fields: [userId], references: [id])
-  userId           String?
-}
-
 // Height in cms / weight in kgs
 model User {
   id                           String                         @default(uuid()) @id
   firebaseUid                  String                         @unique
@@ -232,8 +217,9 @@
   avatarUrl                    String?
   displayName                  String?                        @unique
   firstname                    String?
   lastname                     String?
+  themePreference              ThemePreference?               @default(DARK)
   bio                          String?
   birthdate                    DateTime?
   gender                       Gender?
   height                       Float?
@@ -243,9 +229,8 @@
   countryCode                  String?
   unitSystem                   UnitSystem                     @default(METRIC)
   subscriptionLevel            UserSubscriptionLevel          @default(FREE)
   benchmarks                   Benchmark[]
-  worldRecords                 WorldRecord[]
   challenges                   Challenge[]
   benchmarkVideoValidations    BenchmarkVideoValidation[]
   benchmarkVideoComments       BenchmarkVideoComment[]
   BenchmarkVideoCommentReplies BenchmarkVideoCommentReplies[]
@@ -329,4 +314,9 @@
   KILOMETRES
   YARDS
   MILES
 }
+
+enum ThemePreference {
+  DARK
+  LIGHT
+}
```


