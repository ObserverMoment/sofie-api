# Migration `20200916112611-workout-location-to-gym-profile`

This migration has been generated by ObserverMoment at 9/16/2020, 12:26:11 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."WorkoutLocation" DROP CONSTRAINT "WorkoutLocation_userId_fkey"

ALTER TABLE "public"."User" ALTER COLUMN "gender" SET DEFAULT E'UNSPECIFIED'

CREATE TABLE "public"."GymProfile" (
"id" text   NOT NULL ,
"userId" text   NOT NULL ,
"name" text   NOT NULL ,
"description" text   ,
"postcode" text   ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."GymProfile" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."WorkoutLocation"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200916092305-remove-user-gymbox..20200916112611-workout-location-to-gym-profile
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // model ScoreSubmission {
 //   id                     String                @default(uuid()) @id
@@ -146,9 +146,9 @@
 //   name        String
 //   workouts    Workout[]
 // }
-model WorkoutLocation {
+model GymProfile {
   id          String  @default(uuid()) @id
   user        User    @relation(fields: [userId], references: [id])
   userId      String
   name        String
@@ -322,9 +322,9 @@
   lastname          String?
   themePreference   ThemePreference?   @default(DARK)
   bio               String?
   birthdate         DateTime?
-  gender            Gender?
+  gender            Gender?            @default(UNSPECIFIED)
   height            Float?
   weight            Float?
   townCity          String?
   countryCode       String?
@@ -346,9 +346,9 @@
   loggedWorkouts    LoggedWorkout[]
   // workoutTags                        WorkoutTag[]
   likedWorkouts     LikedWorkout[]
   // LikedWorkoutTag                    LikedWorkoutTag[]
-  workoutLocations  WorkoutLocation[]
+  gymProfiles       GymProfile[]
 }
 // Enums
 enum AccessScopeType {
```


