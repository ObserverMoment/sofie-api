# Migration `20201113121320-liked-workout-program`

This migration has been generated by ObserverMoment at 11/13/2020, 12:13:20 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "LikedWorkoutProgram" (
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "userId" TEXT NOT NULL,
    "notes" TEXT,
    "workoutProgramId" TEXT NOT NULL,

    PRIMARY KEY ("userId","workoutProgramId")
)

ALTER TABLE "LikedWorkoutProgram" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "LikedWorkoutProgram" ADD FOREIGN KEY("workoutProgramId")REFERENCES "WorkoutProgram"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201113114623-workout-goal-placeholder-images..20201113121320-liked-workout-program
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Equipment {
   id                 String        @id @default(uuid())
@@ -46,8 +46,19 @@
   @@id([userId, workoutId])
 }
+model LikedWorkoutProgram {
+  createdAt        DateTime       @default(now())
+  user             User           @relation(fields: [userId], references: [id])
+  userId           String
+  notes            String?
+  workoutProgram   WorkoutProgram @relation(fields: [workoutProgramId], references: [id])
+  workoutProgramId String
+
+  @@id([userId, workoutProgramId])
+}
+
 // Data from a completed workout. Also inlcudes relation to the 'original' workout
 model LoggedWorkout {
   id                        String                   @id @default(uuid())
   name                      String
@@ -160,8 +171,9 @@
   workoutProgramsCreated   WorkoutProgram[]
   /// @onDelete(CASCADE)
   workoutProgramEnrolments WorkoutProgramEnrolment[]
   workoutProgramReviews    WorkoutProgramReview[]
+  LikedWorkoutProgram      LikedWorkoutProgram[]
 }
 model Workout {
   id                String                  @id @default(uuid())
@@ -221,26 +233,27 @@
   workoutSectionId    String
 }
 model WorkoutProgram {
-  id              String                    @id @default(uuid())
-  createdAt       DateTime                  @default(now())
-  name            String
-  description     String?
-  imageUrl        String?
-  videoUrl        String?
-  videoThumbUrl   String?
-  youtubeVideoUrl String?
-  scope           AccessScopeType           @default(PRIVATE)
-  createdBy       User                      @relation(fields: [createdById], references: [id])
-  createdById     String
+  id                  String                    @id @default(uuid())
+  createdAt           DateTime                  @default(now())
+  name                String
+  description         String?
+  imageUrl            String?
+  videoUrl            String?
+  videoThumbUrl       String?
+  youtubeVideoUrl     String?
+  scope               AccessScopeType           @default(PRIVATE)
+  createdBy           User                      @relation(fields: [createdById], references: [id])
+  createdById         String
   /// @onDelete(CASCADE)
-  enrolments      WorkoutProgramEnrolment[]
-  workoutGoals    WorkoutGoal[]
+  enrolments          WorkoutProgramEnrolment[]
+  workoutGoals        WorkoutGoal[]
   /// @onDelete(CASCADE)
-  programWorkouts WorkoutProgramWorkout[]
+  programWorkouts     WorkoutProgramWorkout[]
   /// @onDelete(CASCADE)
-  programReviews  WorkoutProgramReview[]
+  programReviews      WorkoutProgramReview[]
+  LikedWorkoutProgram LikedWorkoutProgram[]
 }
 model WorkoutProgramEnrolment {
   id               String          @id @default(uuid())
```


