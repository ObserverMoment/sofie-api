# Migration `20200723092709-workout-type`

This migration has been generated by ObserverMoment at 7/23/2020, 9:27:09 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."WorkoutType" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
"description" text   ,
"scoreType" "WorkoutScoreType" NOT NULL ,
PRIMARY KEY ("id"))

ALTER TABLE "public"."Workout" DROP COLUMN "workoutScoreType",
ADD COLUMN "workoutTypeId" text  NOT NULL ;

ALTER TABLE "public"."Workout" ADD FOREIGN KEY ("workoutTypeId")REFERENCES "public"."WorkoutType"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200722182302-remove-workout-is-copy..20200723092709-workout-type
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Benchmark {
   id               String          @default(uuid()) @id
@@ -177,14 +177,23 @@
   imageUrl          String?
   timecap           Int?
   difficultyLevel   DifficultyLevel    @default(ONE)
   scope             AccessScopeType    @default(PRIVATE)
-  workoutScoreType  WorkoutScoreType   @default(AMREPS)
+  workoutType       WorkoutType        @relation(fields: [workoutTypeId], references: [id])
+  workoutTypeId     String
   challenges        Challenge[]        @relation(references: [id])
   scheduledWorkouts ScheduledWorkout[]
   workoutSections   WorkoutSection[]
 }
+model WorkoutType {
+  id          String           @default(uuid()) @id
+  name        String
+  description String?
+  scoreType   WorkoutScoreType
+  workouts    Workout[]
+}
+
 model ScheduledWorkout {
   id             String       @default(uuid()) @id
   createdAt      DateTime     @default(now())
   createdBy      User         @relation(fields: [createdById], references: [id])
```


