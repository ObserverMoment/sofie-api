# Migration `20200323132234-create-workouts`

This migration has been generated by ObserverMoment at 3/23/2020, 1:22:35 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Workout" (
    "id" SERIAL,
    "name" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."_MoveToWorkout" (
    "A" integer  NOT NULL ,
    "B" integer  NOT NULL 
) 

CREATE UNIQUE INDEX "_MoveToWorkout_AB_unique" ON "public"."_MoveToWorkout"("A","B")

CREATE  INDEX "_MoveToWorkout_B_index" ON "public"."_MoveToWorkout"("B")

CREATE UNIQUE INDEX "Move.name" ON "public"."Move"("name")

ALTER TABLE "public"."_MoveToWorkout" ADD FOREIGN KEY ("A")REFERENCES "public"."Move"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_MoveToWorkout" ADD FOREIGN KEY ("B")REFERENCES "public"."Workout"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200323131817-initial2..20200323132234-create-workouts
--- datamodel.dml
+++ datamodel.dml
@@ -6,11 +6,18 @@
 }
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url      = env("DATABASE_URL")
 }
 model Move {
-    id   Int    @id @default(autoincrement())
-    name String
+    id       Int       @id @default(autoincrement())
+    name     String    @unique
+    workouts Workout[]
+}
+
+model Workout {
+    id    Int    @id @default(autoincrement())
+    name  String
+    moves Move[]
 }
```


