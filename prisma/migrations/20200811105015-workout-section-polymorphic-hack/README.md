# Migration `20200811105015-workout-section-polymorphic-hack`

This migration has been generated by ObserverMoment at 8/11/2020, 11:50:15 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."WorkoutSection" ALTER COLUMN "workoutId" DROP NOT NULL;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200811102523-logged-workout-v2..20200811105015-workout-section-polymorphic-hack
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model ScoreSubmission {
   id                     String                @default(uuid()) @id
@@ -160,17 +160,20 @@
   scheduledWorkouts ScheduledWorkout[]
   workoutLogs       LoggedWorkout[]
 }
+// Need to implement some more solid polymorphism here if we want to allow a workoutSection
+// to be on a workout or a loggedWorkout
+// Currently no validation makinhg sure the section is not parentless.
 model WorkoutSection {
   id               String            @default(uuid()) @id
   createdAt        DateTime          @default(now())
   sortPosition     Int
   notes            String?
   timecap          Int?
   rounds           Int
-  workout          Workout           @relation(fields: [workoutId], references: [id])
-  workoutId        String
+  workout          Workout?          @relation(fields: [workoutId], references: [id])
+  workoutId        String?
   workoutMoves     WorkoutMove[]
   roundAdjustRules RoundAdjustRule[]
   LoggedWorkout    LoggedWorkout?    @relation(fields: [loggedWorkoutId], references: [id])
   loggedWorkoutId  String?
```


