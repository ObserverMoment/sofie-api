# Migration `20200911163624-liked-workout`

This migration has been generated by ObserverMoment at 9/11/2020, 5:36:24 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."LikedWorkout" (
"id" text   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"userId" text   NOT NULL ,
"notes" text   ,
"workoutId" text   ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."LikedWorkout" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."LikedWorkout" ADD FOREIGN KEY ("workoutId")REFERENCES "public"."Workout"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200903141831-reset-2..20200911163624-liked-workout
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // model ScoreSubmission {
 //   id                     String                @default(uuid()) @id
@@ -171,8 +171,9 @@
   scheduledWorkouts ScheduledWorkout[]
   workoutLogs       LoggedWorkout[]
   // tags              WorkoutTag[]
   // likes             LikedWorkout[]
+  LikedWorkout      LikedWorkout[]
 }
 model ScheduledWorkout {
   id              String         @default(uuid()) @id
@@ -199,18 +200,18 @@
 //   name          String
 //   likedWorkouts LikedWorkout[]
 // }
-// model LikedWorkout {
-//   id               String            @default(uuid()) @id
-//   createdAt        DateTime          @default(now())
-//   user             User              @relation(fields: [userId], references: [id])
-//   userId           String
-//   notes            String?
-//   workout          Workout?          @relation(fields: [workoutId], references: [id])
-//   workoutId        String?
-//   likedworkoutTags LikedWorkoutTag[]
-// }
+model LikedWorkout {
+  id        String   @default(uuid()) @id
+  createdAt DateTime @default(now())
+  user      User     @relation(fields: [userId], references: [id])
+  userId    String
+  notes     String?
+  workout   Workout? @relation(fields: [workoutId], references: [id])
+  workoutId String?
+  // likedworkoutTags LikedWorkoutTag[]
+}
 // Need to implement some more solid polymorphism here if we want to allow a workoutSection
 // to be on a workout or a loggedWorkout
 // Currently no validation makinhg sure the section is not parentless.
@@ -338,8 +339,9 @@
   loggedWorkouts    LoggedWorkout[]
   // workoutTags                        WorkoutTag[]
   // likedWorkouts                      LikedWorkout[]
   // LikedWorkoutTag                    LikedWorkoutTag[]
+  LikedWorkout      LikedWorkout[]
 }
 // Enums
 enum AccessScopeType {
```


