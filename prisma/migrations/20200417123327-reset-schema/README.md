# Migration `20200417123327-reset-schema`

This migration has been generated by ObserverMoment at 4/17/2020, 12:33:27 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" DROP COLUMN "firebaseUid",
ADD COLUMN "firebaseUid" text  NOT NULL ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200417123327-reset-schema
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,146 @@
+// https://github.com/prisma/prisma2
+// SDL first example: https://github.com/prisma/prisma-examples/tree/prisma2/javascript/graphql-sdl-first
+// Migrations: https://github.com/prisma/migrate
+generator client {
+  provider = "prisma-client-js"
+}
+
+// url      = env("DATABASE_URL")
+datasource db {
+  provider = "postgresql"
+  url      = "postgres://vksegplfohzkfb:4006286c49b2ccada42a32cc56f0405ae370152bd9e594d3f38b5d1f34cebadb@ec2-79-125-26-232.eu-west-1.compute.amazonaws.com:5432/dfj0e91erhbqs1"
+}
+
+model Benchmark {
+  id           String        @default(uuid()) @id
+  createdAt    DateTime      @default(now())
+  completedOn  DateTime
+  level        Level
+  score        Int
+  notes        String?
+  user         User          @relation(fields: [userId], references: [id])
+  userId       String
+  workout      Workout       @relation(fields: [workoutId], references: [id])
+  workoutId    String
+  workoutVideo WorkoutVideo?
+}
+
+model League {
+  id          String  @default(uuid()) @id
+  logoUrl     String?
+  name        String  @unique
+  description String?
+  user        User[]  @relation(references: [id])
+}
+
+model Move {
+  id           String        @default(uuid()) @id
+  name         String        @unique
+  workoutMoves WorkoutMove[]
+}
+
+// Height in cms / weight in kgs
+model User {
+  id           String        @default(uuid()) @id
+  firebaseUid  String        @unique
+  createdAt    DateTime      @default(now())
+  avatarUrl    String?
+  displayName  String        @unique
+  firstname    String
+  lastname     String
+  email        String
+  bio          String?
+  birthdate    DateTime
+  gender       Gender
+  height       Int
+  weight       Int
+  gymBox       String?
+  townCity     String?
+  country      String?
+  benchmarks   Benchmark[]
+  leagues      League[]      @relation(references: [id])
+  worldRecords WorldRecord[]
+}
+
+model Workout {
+  id            String         @default(uuid()) @id
+  name          String         @unique
+  category      WodCategory
+  summary       String
+  description   String?
+  workoutType   WorkoutType
+  workoutMoves  WorkoutMove[]
+  workoutVideos WorkoutVideo[]
+  worldRecord   WorldRecord[]
+  benchmarks    Benchmark[]
+}
+
+model WorkoutMove {
+  id                  String  @default(uuid()) @id
+  beginnerScaling     String?
+  intermediateScaling String?
+  prescribedScaling   String?
+  repsPerRound        Int?
+  move                Move    @relation(fields: [moveId], references: [id])
+  moveId              String
+  workout             Workout @relation(fields: [workoutId], references: [id])
+  workoutId           String
+}
+
+model WorkoutVideo {
+  id          String    @default(uuid()) @id
+  createdAt   DateTime  @default(now())
+  videoUrl    String
+  notes       String?
+  workout     Workout   @relation(fields: [workoutId], references: [id])
+  workoutId   String
+  benchmark   Benchmark @relation(fields: [benchmarkId], references: [id])
+  benchmarkId String
+}
+
+model WorldRecord {
+  id          String     @default(uuid()) @id
+  createdAt   DateTime   @default(now())
+  updatedAt   DateTime   @updatedAt
+  notes       String?
+  recordValue Int
+  recordType  RecordType
+  gender      Gender
+  workout     Workout    @relation(fields: [workoutId], references: [id])
+  workoutId   String
+  user        User?      @relation(fields: [userId], references: [id])
+  userId      String?
+}
+
+enum Gender {
+  MALE
+  FEMALE
+}
+
+enum Level {
+  BEGINNER
+  INTERMEDIATE
+  ELITE
+}
+
+// AMRAP in reps
+// TIME in seconds
+// LOAD in lbs
+enum RecordType {
+  AMRAP
+  FORTIME
+  FORLOAD
+}
+
+// https://beyondthewhiteboard.com/gyms/2-main-site/leader_boards/414
+enum WodCategory {
+  GIRLS
+  HEROES
+  NOTABLES
+}
+
+enum WorkoutType {
+  AMRAP
+  FORTIME
+  FORLOAD
+}
```


