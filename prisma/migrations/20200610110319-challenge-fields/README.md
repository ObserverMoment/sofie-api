# Migration `20200610110319-challenge-fields`

This migration has been generated by ObserverMoment at 6/10/2020, 11:03:19 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Challenge" ADD COLUMN "calsPerPoint" integer  NOT NULL DEFAULT 5,
ADD COLUMN "mtrsPerPoint" integer  NOT NULL DEFAULT 5,
ADD COLUMN "multiplyScores" boolean  NOT NULL DEFAULT false,
ADD COLUMN "repsPerPoint" integer  NOT NULL DEFAULT 5,
ADD COLUMN "scoreByPosition" boolean  NOT NULL DEFAULT false,
ADD COLUMN "secsPerPoint" integer  NOT NULL DEFAULT 5,
ALTER COLUMN "scope" SET DEFAULT E'PRIVATE';

ALTER TABLE "public"."Group" ALTER COLUMN "scope" SET DEFAULT E'PRIVATE';

ALTER TABLE "public"."Move" ALTER COLUMN "scope" SET DEFAULT E'PRIVATE';

ALTER TABLE "public"."User" ALTER COLUMN "subscriptionLevel" SET DEFAULT E'FREE',
ALTER COLUMN "unitSystem" SET DEFAULT E'METRIC';

ALTER TABLE "public"."Workout" ALTER COLUMN "difficultyLevel" SET DEFAULT E'ONE',
ALTER COLUMN "scope" SET DEFAULT E'PRIVATE',
ALTER COLUMN "workoutScoreType" SET DEFAULT E'AMREPS';

ALTER TABLE "public"."WorkoutMove" ALTER COLUMN "repType" SET DEFAULT E'REPS';

ALTER TABLE "public"."WorldRecord" ALTER COLUMN "workoutScoreType" SET DEFAULT E'AMREPS';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200609172327-workout-section-pyramid-structure..20200610110319-challenge-fields
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Benchmark {
   id               String          @default(uuid()) @id
@@ -74,8 +74,15 @@
   name             String             @unique
   category         String?
   description      String?
   imageUrl         String?
+  repsPerPoint     Int                @default(5)
+  secsPerPoint     Int                @default(5)
+  mtrsPerPoint     Int                @default(5)
+  calsPerPoint     Int                @default(5)
+  scoreByPosition  Boolean            @default(false)
+  // If true, score multiplies across workouts, else they sum
+  multiplyScores   Boolean            @default(false)
   group            Group              @relation(fields: [groupId], references: [id])
   groupId          String
   createdBy        User               @relation(fields: [createdById], references: [id])
   createdById      String
```


