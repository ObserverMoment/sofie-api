# Migration `20200609133833-remove-crossfit-category`

This migration has been generated by ObserverMoment at 6/9/2020, 1:38:33 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "WorkoutScoreType_new" AS ENUM ('AMREPS', 'EMOM', 'FORTIME', 'FORLOAD');
ALTER TABLE "public"."Workout" ALTER COLUMN "workoutScoreType" DROP DEFAULT,
                        ALTER COLUMN "workoutScoreType" TYPE "WorkoutScoreType_new" USING ("workoutScoreType"::text::"WorkoutScoreType_new"),
                        ALTER COLUMN "workoutScoreType" SET DEFAULT 'AMREPS';
ALTER TABLE "public"."WorldRecord" ALTER COLUMN "workoutScoreType" DROP DEFAULT,
                        ALTER COLUMN "workoutScoreType" TYPE "WorkoutScoreType_new" USING ("workoutScoreType"::text::"WorkoutScoreType_new"),
                        ALTER COLUMN "workoutScoreType" SET DEFAULT 'AMREPS';
ALTER TYPE "WorkoutScoreType" RENAME TO "WorkoutScoreType_old";
ALTER TYPE "WorkoutScoreType_new" RENAME TO "WorkoutScoreType";
DROP TYPE "WorkoutScoreType_old"

ALTER TABLE "public"."Challenge" ALTER COLUMN "scope" SET DEFAULT E'PRIVATE';

ALTER TABLE "public"."Group" ALTER COLUMN "scope" SET DEFAULT E'PRIVATE';

ALTER TABLE "public"."Move" ALTER COLUMN "scope" SET DEFAULT E'PRIVATE';

ALTER TABLE "public"."User" ALTER COLUMN "subscriptionLevel" SET DEFAULT E'FREE',
ALTER COLUMN "unitSystem" SET DEFAULT E'METRIC';

ALTER TABLE "public"."Workout" DROP COLUMN "crossfitWodCategory",
ALTER COLUMN "difficultyLevel" SET DEFAULT E'ONE',
ALTER COLUMN "scope" SET DEFAULT E'PRIVATE',
ALTER COLUMN "workoutScoreType" SET DEFAULT E'AMREPS';

ALTER TABLE "public"."WorkoutMove" ALTER COLUMN "repType" SET DEFAULT E'REPS';

ALTER TABLE "public"."WorldRecord" ALTER COLUMN "workoutScoreType" SET DEFAULT E'AMREPS';

DROP TYPE "CrossfitWodCategory"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200609132315-morkout-move-description..20200609133833-remove-crossfit-category
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Benchmark {
   id               String          @default(uuid()) @id
@@ -153,25 +153,24 @@
   workoutMoves   WorkoutMove[]
 }
 model Workout {
-  id                  String               @default(uuid()) @id
-  createdAt           DateTime             @default(now())
-  createdBy           User?                @relation(fields: [createdById], references: [id])
-  createdById         String?
-  name                String
-  summary             String?
-  description         String?
-  timecapSeconds      Int?
-  genderEquality      Boolean              @default(true)
-  difficultyLevel     DifficultyLevel      @default(ONE)
-  scope               AccessScopeType      @default(PRIVATE)
-  crossfitWodCategory CrossfitWodCategory?
-  workoutScoreType    WorkoutScoreType     @default(AMREPS)
-  worldRecords        WorldRecord[]
-  challenges          Challenge[]          @relation(references: [id])
-  scheduledWorkouts   ScheduledWorkout[]
-  workoutSections     WorkoutSection[]
+  id                String             @default(uuid()) @id
+  createdAt         DateTime           @default(now())
+  createdBy         User?              @relation(fields: [createdById], references: [id])
+  createdById       String?
+  name              String
+  summary           String?
+  description       String?
+  timecapSeconds    Int?
+  genderEquality    Boolean            @default(true)
+  difficultyLevel   DifficultyLevel    @default(ONE)
+  scope             AccessScopeType    @default(PRIVATE)
+  workoutScoreType  WorkoutScoreType   @default(AMREPS)
+  worldRecords      WorldRecord[]
+  challenges        Challenge[]        @relation(references: [id])
+  scheduledWorkouts ScheduledWorkout[]
+  workoutSections   WorkoutSection[]
 }
 model ScheduledWorkout {
   id             String       @default(uuid()) @id
@@ -301,28 +300,19 @@
   TIME
 }
 // AMREPS in reps
-// AMROUNDS in rounds
 // TIME in seconds
 // LOAD in kgs
 // EMON in rounds completed (if doing standard EMON then this unit value is minutes)
 // Also used for: Every 5 miniutes on the 5 minutes etc - free text in description?
 enum WorkoutScoreType {
   AMREPS
-  AMROUNDS
   EMOM
   FORTIME
   FORLOAD
 }
-// https://beyondthewhiteboard.com/gyms/2-main-site/leader_boards/414
-enum CrossfitWodCategory {
-  GIRLS
-  HEROES
-  NOTABLES
-}
-
 enum UnitSystem {
   IMPERIAL
   METRIC
 }
```


